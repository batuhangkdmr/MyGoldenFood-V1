@model IEnumerable<MyGoldenFood.Models.Blog>
@{
    ViewData["Title"] = "Blog Yönetimi | Admin Panel | My Golden Food";
    Layout = "_Layout";
}

<!-- SEO Meta Etiketleri -->
<head>
    <meta name="description" content="Blog yazıları yönetim paneli. Donuk gıda blog yazılarını düzenleme, silme ve yayınlama işlemleri.">
    <meta name="keywords" content="blog yönetimi, admin panel, donuk gıda blog, blog yazıları yönetimi">
    <meta name="author" content="My Golden Food">
    <meta name="robots" content="noindex, nofollow">
    <meta property="og:title" content="Blog Yönetimi | Admin Panel">
    <meta property="og:description" content="Blog yazıları yönetim paneli">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mygoldenfood.com/Blog/Admin">
    <link rel="canonical" href="https://mygoldenfood.com/Blog/Admin">
</head>

<div class="container mt-5">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Blog Yönetimi</h2>
                <a href="@Url.Action("Create", "Blog")" class="btn btn-success">
                    <i class="fas fa-plus me-2"></i>Yeni Blog Yazısı
                </a>
            </div>

            @if (Model.Any())
            {
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>ID</th>
                                <th>Başlık</th>
                                <th>Kategori</th>
                                <th>Yazar</th>
                                <th>Oluşturulma Tarihi</th>
                                <th>Durum</th>
                                <th>Görüntülenme</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var blog in Model)
                            {
                                <tr>
                                    <td>@blog.Id</td>
                                    <td>
                                        <strong>@blog.Title</strong>
                                        @if (!string.IsNullOrEmpty(blog.Summary))
                                        {
                                            <br><small class="text-muted">@(blog.Summary.Length > 50 ? blog.Summary.Substring(0, 50) + "..." : blog.Summary)</small>
                                        }
                                    </td>
                                    <td>
                                        @if (!string.IsNullOrEmpty(blog.Category))
                                        {
                                            <span class="badge bg-info">@blog.Category</span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-secondary">Kategori Yok</span>
                                        }
                                    </td>
                                    <td>@blog.Author</td>
                                    <td>@blog.CreatedDate.ToString("dd.MM.yyyy HH:mm")</td>
                                    <td>
                                        @if (blog.IsPublished)
                                        {
                                            <span class="badge bg-success">Yayında</span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-warning">Taslak</span>
                                        }
                                    </td>
                                    <td>
                                        <span class="badge bg-primary">@blog.ViewCount</span>
                                    </td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            <a href="@Url.Action("Details", "Blog", new { id = blog.Id })" 
                                               class="btn btn-sm btn-info" 
                                               target="_blank" 
                                               title="Görüntüle">
                                                <i class="fas fa-eye"></i>
                                            </a>
                                            <a href="@Url.Action("Edit", "Blog", new { id = blog.Id })" 
                                               class="btn btn-sm btn-warning" 
                                               title="Düzenle">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form method="post" action="@Url.Action("TogglePublish", "Blog", new { id = blog.Id })" 
                                                  style="display: inline;" 
                                                  onsubmit="return confirm('Yayın durumunu değiştirmek istediğinizden emin misiniz?')">
                                                <button type="submit" class="btn btn-sm btn-secondary" title="@(blog.IsPublished ? "Yayından Kaldır" : "Yayınla")">
                                                    <i class="fas fa-@(blog.IsPublished ? "eye-slash" : "eye")"></i>
                                                </button>
                                            </form>
                                            <a href="@Url.Action("Delete", "Blog", new { id = blog.Id })" 
                                               class="btn btn-sm btn-danger" 
                                               title="Sil"
                                               onclick="return confirm('Bu blog yazısını silmek istediğinizden emin misiniz?')">
                                                <i class="fas fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

                <!-- İstatistikler -->
                <div class="row mt-4">
                    <div class="col-md-3">
                        <div class="card bg-primary text-white">
                            <div class="card-body text-center">
                                <h5 class="card-title">Toplam Blog</h5>
                                <h3>@Model.Count()</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-success text-white">
                            <div class="card-body text-center">
                                <h5 class="card-title">Yayında</h5>
                                <h3>@Model.Count(b => b.IsPublished)</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-warning text-white">
                            <div class="card-body text-center">
                                <h5 class="card-title">Taslak</h5>
                                <h3>@Model.Count(b => !b.IsPublished)</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card bg-info text-white">
                            <div class="card-body text-center">
                                <h5 class="card-title">Toplam Görüntülenme</h5>
                                <h3>@Model.Sum(b => b.ViewCount)</h3>
                            </div>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="alert alert-info text-center">
                    <h3>Henüz blog yazısı bulunmuyor</h3>
                    <p>İlk blog yazınızı oluşturmak için "Yeni Blog Yazısı" butonuna tıklayın.</p>
                    <a href="@Url.Action("Create", "Blog")" class="btn btn-success">
                        <i class="fas fa-plus me-2"></i>İlk Blog Yazısını Oluştur
                    </a>
                </div>
            }

            <!-- Geri Dön Butonu -->
            <div class="text-center mt-4">
                <a href="@Url.Action("Index", "Home")" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Ana Sayfaya Dön
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Admin Panel SEO Açıklaması (Gizli) -->
<div class="seo-admin-panel-info" style="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;">
    <h2>Blog Yönetim Paneli</h2>
    <p>
        <strong>Donuk gıda</strong> blog yazılarını yönetmek için kullanılan admin paneli. 
        Blog yazılarını oluşturma, düzenleme, silme ve yayın durumunu değiştirme işlemleri.
    </p>
</div>
